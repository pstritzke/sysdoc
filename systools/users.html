<!DOCTYPE html>
<html dir="ltr" lang="en">
    <head>
        <meta charset='utf-8'>
        <title>17. Users and Groups</title>
    </head>
    <body>


        <h1>17. Users</h1>

        <h2 id="listusers">17.1. List users</h2>

        <pre>
        # cat /etc/passwd
        </pre>

        <h2 id="listgroups">17.2. List groups</h2>

        <pre>
        # cat /etc/group
        </pre>

        <h2 id="groupadd">17.3. Add group</h2>

        <pre>
        # useradd newgroup
        </pre>

        <h2 id="useradd">17.4. Add user</h2>

        <pre>
        /etc/default/useradd
        /etc/login.defs
        </pre>

        <pre>
        # useradd -U -m -k /etc/skel -s /bin/bash bob
        # passwd bob
        # chmod 0700 /home/bob
        </pre>

        <p>If home user directory exists and is not empty, consider
        <a href="http://superuser.com/questions/176686/shared-linux-machine-block-home-folder-access-to-other-users">this tip</a>
        from Aaron Digulla;</p>

        <pre>
        find $HOME -type d -exec chmod go-rwx "{}" \;
        </pre>

        <p>Example of initial user directory layout;</p>

        <pre>
        .bash_profile
        .bashrc
        .gnupg/
        .gnupg/gpg.conf
        .mutt/
        .mutt/gpg.rc
        .tmux.conf
        .vimrc
        </pre>

        <h2 id="groupdel">17.6. Remove group</h2>

        <pre>
        # groupdel bob
        </pre>

        <h2 id="userdel">17.6. Remove user</h2>

        <p>Command userdel delete a user account, with -r option
        files in user's home directory will be removed along with the
        home directory itself and the user's mail spool. Example how
        to remove bob user and all its files;</p>

        <pre>
        # userdel -r bob
        </pre>

        <h2 id="perm">17.7. Permissions</h2>

        <p>Add user to additional groups, this is necessary so it has permissions
        to use audio, video and input. Users group is a generic group for all users;</p>

        <pre>
        # usermod -G audio,video,users,input bob
        </pre>

        <p>To allow users group to use shutdown command without password,
        for other user you can create alias, both for commands and users
        groups.</p>

        <pre>
        bash-4.3# sudoedit /etc/sudoers
        </pre>

        <pre>
        %users ALL=NOPASSWD: /sbin/shutdown
        </pre>

        <p>You can add alias to your <a href="../systools/bash.html#bashrc">bash.rc</a>;</p>

        <pre>
        alias shutdown="sudo /sbin/shutdown"
        </pre>


    </body>
</html>
